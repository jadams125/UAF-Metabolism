"0",""
"0","max.par.poke <- max(poke2021par$CalibratedValue)"
"0",""
"0","max.par.crrel <- max(salchaData$ParWm2.int)"
"0",""
"0","multiplyFactor <- max.par.poke/max.par.crrel"
"0",""
"0",""
"0","salchaData$Light_umol <- salchaData$ParWm2.int *multiplyFactor"
"0",""
"0",""
"0","#DO SAT"
"0",""
"0",""
"0","#######"
"0",""
"0","# "
"0","# strt.2021.atmo.url <- ""https://drive.google.com/drive/u/2/folders/1-om0nU42U8fNmeWtBrhM8WQTbGqBW8RN"""
"0","# strtatmo <- drive_get(as_id(strt.2021.atmo.url))"
"0","# test1strt2021_glist <- drive_ls(strtatmo, pattern = ""20005934_STRT_ATMO_210930.csv"")"
"0","# walk(test1strt2021_glist$id, ~ drive_download(as_id(.x), overwrite = TRUE))"
"0","# strt2021atmo.Data <- read.csv(""20005934_STRT_ATMO_210930.csv"", "
"0","#                               skip = 1, header = TRUE)"
"0","# "
"0","# names(strt2021atmo.Data)[3]= c(""pressure.air.mbar"")"
"0","# names(strt2021atmo.Data)[2]= c(""dateTimePre"")"
"0","# names(strt2021atmo.Data)[4]= c(""TempC.air"")"
"0","# "
"0","# "
"0","# "
"0","# ## Go off STRT and adjust for elevation"
"0","# "
"0","# #strt elevation: 250 meters, 820 feet"
"0","# "
"0","# #Salcha elevation: 196 meters, 643.045 feet"
"0","# "
"0","# "
"0","# ##calc pressure at sea level"
"0","# "
"0","# #air pressure at sea level in mmHg"
"0","# #formula from https://keisan.casio.com/exec/system/1224575267"
"0","# "
"0","# strt2021atmo.Data$mmHg.sea.level <- strt2021atmo.Data$pressure.air.mbar*((1-(0.0065*250)/(strt2021atmo.Data$TempC.air + (0.0065*250) +273.15))^(-5.257)) / 1.33322387415"
"0","# "
"0","# #air pressure at moos elevation"
"0","# "
"0","# strt2021atmo.Data$salcha.air.pressure.mbar <- (strt2021atmo.Data$mmHg.sea.level -(2.5* 643.045/100))* 1.33322 "
"0","# "
"0","# "
"0","# "
"0","# strt2021atmo.Data$datetimeAK <- as.POSIXct(strt2021atmo.Data$dateTimePre, format=""%m/%d/%y %I:%M:%S %p"", tz=""America/Anchorage"")"
"0","# "
"0","# "
"0","# strt2021atmo.Data$strt.air.pressure.mbar <- strt2021atmo.Data$pressure.air.mbar"
"0","# "
"0","# strt2021atmo.Data <- strt2021atmo.Data %>% select(datetimeAK, salcha.air.pressure.mbar, mmHg.sea.level, TempC.air, strt.air.pressure.mbar) "
"0",""
"0","# salchatest1 <- plyr::join(strt2021atmo.Data, salchaData, by = ""datetimeAK"")"
"0",""
"0",""
"0",""
"0",""
"0","#vaul ATMO for comparison, will not be used. "
"0",""
"0","vaul.2021.atmo.url <- ""https://drive.google.com/drive/u/1/folders/1F80dynCpIo87e5EalwjNprze5UnLiomX"""
"0","vaulatmo <- drive_get(as_id(vaul.2021.atmo.url))"
"0","test1vaul2021_glist <- drive_ls(vaulatmo, pattern = ""20574425_VAUL_atmo.csv"")"
"2",""
"2"," "
"0","walk(test1vaul2021_glist$id, ~ drive_download(as_id(.x), overwrite = TRUE))"
"2","File downloaded:
"
"2","[36m*[39m [36m20574425_VAUL_atmo.csv[39m [90m<id: 1Cg9CW8ywFBn1nizS9V7p-XoSPwuLAwJW>[39m
"
"2","Saved locally as:
"
"2","[36m*[39m [34m20574425_VAUL_atmo.csv[39m
"
"0","vaul2021atmo.Data <- read.csv(""20574425_VAUL_atmo.csv"","
"0","                              skip = 1, header = TRUE)"
"0",""
"0","names(vaul2021atmo.Data)[3]= c(""pressure.air.kpa"")"
"0","names(vaul2021atmo.Data)[2]= c(""dateTimePre"")"
"0","names(vaul2021atmo.Data)[4]= c(""TempC.air.vaul"")"
"0",""
"0",""
"0","vaul2021atmo.Data$vaul.pressure.air.mbar <- vaul2021atmo.Data$pressure.air.kpa* 10"
"0",""
"0",""
"0","## Go off VAUL and adjust for elevation"
"0",""
"0","#VAUL elevation: 210 meters, 688.976 feet"
"0","#Salcha elevation: 196 meters, 643.045 feet"
"0",""
"0",""
"0","##calc pressure at sea level"
"0",""
"0","#air pressure at sea level in mmHg"
"0","#formula from https://keisan.casio.com/exec/system/1224575267"
"0",""
"0","vaul2021atmo.Data$mmHg.sea.level <- vaul2021atmo.Data$vaul.pressure.air.mbar*((1-(0.0065*210)/(vaul2021atmo.Data$TempC.air.vaul + (0.0065*210) +273.15))^(-5.257)) / 1.33322387415"
"0",""
"0","#air pressure at moos elevation"
"0",""
"0","vaul2021atmo.Data$salcha.air.pressure.mbar <- (vaul2021atmo.Data$mmHg.sea.level -(2.5* 688.976/100))* 1.33322 "
"0",""
"0",""
"0","vaul2021atmo.Data$datetimeAK <- as.POSIXct(vaul2021atmo.Data$dateTimePre, format=""%m/%d/%y %I:%M:%S %p"", tz=""America/Anchorage"")"
"0",""
"0","vaul2021atmo.Data <- vaul2021atmo.Data %>% select(datetimeAK, TempC.air.vaul, salcha.air.pressure.mbar)"
"0",""
"0","salchatest1 <- plyr::join(vaul2021atmo.Data, salchaData, by = ""datetimeAK"")"
"0",""
"0",""
"0",""
"0","# "
"0","# salchatest1 %>% "
"0","#   # filter(datetimeAK >= ""2021-05-18 00:00:00"" & datetimeAK <= ""2021-06-30 00:00:00"" ) %>% "
"0","#   ggplot(aes(x=solar.time))  + labs(colour=""Datasets"", y = ""Pressure (mbar)"") + geom_line(aes(y=salcha.air.pressure.mbar, colour= ""Salcha corrected from STRT"")) + geom_line(aes(y=vaul.pressure.air.mbar, colour= ""Vaul Pressure""))"
"0","# # + geom_line(aes(y=strt.air.pressure.mbar, colour= ""STRT""))"
"0",""
"0",""
"0",""
"0",""
"0",""
"0",""
"0","# Salcha_DoD_and_USGS_2021 <- na.omit(Salcha_DoD_and_USGS_2021)"
"0","# retrieve_air_pres()"
"0",""
"0",""
"0","salchatest1$ModeledDOSat <- calc_DO_sat(salchatest1$Temp.C.int, salchatest1$salcha.air.pressure.mbar , model = ""garcia-benson"")"
"0",""
"0",""
"0",""
"0",""
"0",""
"0",""
"0",""
"0",""
"0","#####EAFB pressure test"
"0",""
"0","PAEI_2021 <- read.csv(here(""PAEI_2021.csv""), skip = 6, header = TRUE)"
"0",""
"0","PAEI_2021 <- PAEI_2021[-1,]"
"0",""
"0",""
"0","PAEI_2021$datetimeAK <- as.POSIXct(mdy_hm(PAEI_2021$Date_Time, tz = ""America/Anchorage""))"
"0",""
"0","PAEI_2021$datetimeAK <- round_date(PAEI_2021$datetimeAK, ""15 mins"")"
"0",""
"0","PAEI_2021 <- PAEI_2021 %>% select(datetimeAK, sea_level_pressure_set_1, air_temp_set_1)"
"0",""
"0","data_mean1 <- aggregate(as.numeric(sea_level_pressure_set_1) ~ datetimeAK, PAEI_2021, mean)"
"0",""
"0","joinEAFB <- left_join(ts_2021, data_mean1, by =""datetimeAK"")"
"0",""
"0","joinEAFB$air.temp.filled <- na_kalman(joinEAFB$`as.numeric(air_temp_set_1)`)"
"0",""
"0","joinEAFB$air.pressure.filled <- na_kalman(joinEAFB$`as.numeric(sea_level_pressure_set_1)`, type = ""level"")"
"0",""
"0",""
"0",""
"0","joinEAFB$air.pressure.filled.mbar.eafb <- joinEAFB$air.pressure.filled / 0.029529983071445"
"0",""
"0","EAFB <- joinEAFB %>% select(datetimeAK, air.pressure.filled.mbar.eafb)"
"0",""
"0","EAFB$air.pressure.filled.mbar.eafb.elevation <- (EAFB$air.pressure.filled.mbar.eafb -(2.5* 652.887/100))"
"0",""
"0",""
"0","salchatest1 <- full_join(salchatest1,EAFB, by = ""datetimeAK"")"
"0",""
"0",""
"0","#DO sat AIFB"
"0","salchatest1$DO.sat.EAFB <- calc_DO_sat(salchatest1$Temp.C.int, salchatest1$air.pressure.filled.mbar.eafb.elevation)"
"0",""
"0",""
"0",""
"0","salchatest1 %>% filter(datetimeAK >= ""2021-07-01 00:00:00"" & datetimeAK <= ""2021-07-10 00:00:00"" ) %>% ggplot(aes(x=solar.time)) + geom_line(aes(y=DO.sat.EAFB, colour= ""DO.sat (EAFB Calcualted)"")) + geom_line(aes(y = ODO.mgL.int, colour = 'DO.obs')) + labs(colour=""Datasets"", y = ""DO (mg/L)"")"
