"0","####### VAULT #######"
"0",""
"0","### 2019 ###"
"0","#Read cleaned CSVs from DoD 2019 Script "
"0",""
"0","SondeData2019 <- read_csv(""C:/Users/jadams125/documents/GitHub/DoD_2019/processed_sensor_dat/SUNA.EXO.int.corr.csv"")"
"1","[1mRows: [22m[34m76357[39m [1mColumns: [22m[34m60[39m
"
"1","[36m--[39m [1mColumn specification[22m [36m--------------------------------------------------------------------------[39m
[1mDelimiter:[22m "",""
[31mchr[39m   (2): site.ID, Site
[32mdbl[39m  (56): fDOM.QSU.mn, fDOM.QSU.SD, ODO.Psat.mn, ODO.Psat.SD, ODO.Ploc.mn, ODO.Ploc.SD, ODO.m...
[34mdttm[39m  (2): datetimeAK, min
"
"1","
[36mi[39m Use `spec()` to retrieve the full column specification for this data.
[36mi[39m Specify the column types or set `show_col_types = FALSE` to quiet this message.
"
"0","SondeData2019$datetimeAK <- force_tz(as.POSIXct(SondeData2019$datetimeAK), ""America/Anchorage"")"
"0",""
"0","# Have to rename rows so they dont have ""mean"" in them so it can be combined for three straight years. Data is cleaned."
"0",""
"0","SondeData2019.renamed <- SondeData2019 %>%"
"0","  dplyr::rename(ODO.mgL = ODO.mgL.mn, ODO.Psat = ODO.Psat.mn, ODO.Ploc = ODO.Ploc.mn, Temp.C = Temp.C.mn) %>% select(datetimeAK, Temp.C, ODO.mgL, ODO.Psat, ODO.Ploc, site.ID)"
"0",""
"0",""
"0","VAUL_EXO_cl.2019.renamed <- SondeData2019.renamed %>% filter(site.ID == ""VAUL"")"
"0",""
"0",""
"0",""
"0",""
"0","# "
"0","# #### 2019 ####"
"0","# VAUL_EXO_cl.2019 <- read_csv(""C:/Users/jadams125/documents/GitHub/DoD_2019/EXO_processed/VAUL.EXO.cl.csv"")"
"0","# "
"0","# VAUL_EXO_cl.2019$datetimeAK <- force_tz(as.POSIXct(VAUL_EXO_cl.2019$datetimeAK), ""America/Anchorage"")"
"0","# "
"0","# # Have to rename rows so they done have ""mean"" in them so it can be combined for three straight years. Data is not cleaned."
"0","# "
"0","# VAUL_EXO_cl.2019.renamed <- VAUL_EXO_cl.2019 %>%"
"0","#   dplyr::rename(ODO.mgL = ODO.mgL.mn, ODO.Psat = ODO.Psat.mn, ODO.Ploc = ODO.Ploc.mn, Temp.C = Temp.C.mn) %>% select(datetimeAK, Temp.C, ODO.mgL, ODO.Psat, ODO.Ploc)"
"0",""
"0","# "
"0","# #########DEPTH ################"
"0","# # Vaul:"
"0","# "
"0","# #download flowmeter data"
"0","# WR_19.url <- ""https://drive.google.com/drive/u/1/folders/1bm62_JO1dKrFPyUCz8E88K5q7IHElXPP"""
"0","# WR.19.1 <- drive_get(as_id(WR_19.url))"
"0","# vaul.wr19_glist <- drive_ls(WR.19.1, pattern = ""vaul_2019_flowmeter_Q_for_R_JAA.csv"")"
"0","# walk(vaul.wr19_glist$id, ~ drive_download(as_id(.x), overwrite = TRUE))"
"0","# vaul_WR_19.Data <- read.csv(""vaul_2019_flowmeter_Q_for_R_JAA.csv"","
"0","#                             skip = 1, header = TRUE, na.strings=c("""",""NA"",""blank""))"
"0","# "
"0","# vaul_WR_19.Data <- vaul_WR_19.Data %>% tidyr::fill(Date, .direction = (""down""))"
"0","# "
"0","# vaul_WR_19.Data <- vaul_WR_19.Data %>% tidyr::fill(Time, .direction = (""down""))"
"0","# "
"0","# "
"0","# vaul_WR_19.Data$datetimeAK <- as.POSIXct(paste(vaul_WR_19.Data$Date, vaul_WR_19.Data$Time), format=""%m/%d/%Y %H:%M"")"
"0","# "
"0","# "
"0","# vaul_WR_19.Data <- vaul_WR_19.Data %>%"
"0","#   select(Depth..cm., datetimeAK)"
"0","# "
"0","# Vaul_depth_19 <- ddply(na.omit(vaul_WR_19.Data), .(datetimeAK), summarize, meanDepth = mean(as.numeric(Depth..cm.)))"
"0","# "
"0","# # vaul_wr.lm <- lm(meanDepth~datetimeAK, Vaul_depth_19)"
"0","# "
"0","# "
"0","# Vaul_depth_19 <- setDT(Vaul_depth_19)"
"0","# "
"0","# Vaul_depth_19 <- Vaul_depth_19 %>%"
"0","#   dplyr::rename(datetimeAK = datetimeAK)"
"0","# "
"0","# VAUL_EXO_cl.2019.renamed <- setDT(VAUL_EXO_cl.2019.renamed)"
"0","# "
"0","# setDT(Vaul_depth_19)"
"0","# setDT(VAUL_EXO_cl.2019.renamed)"
"0","# "
"0","# VAUL_EXO_cl.2019.renamed$datetimeAK1 <- VAUL_EXO_cl.2019.renamed$datetimeAK"
"0","# "
"0","# setkey( VAUL_EXO_cl.2019.renamed, datetimeAK )"
"0","# setkey( Vaul_depth_19, datetimeAK )"
"0","# "
"0","# #WR was taken when EXO out of water. round depth point to nearest in data record"
"0","# rounded.dates_vaul19 <- VAUL_EXO_cl.2019.renamed[ Vaul_depth_19, roll = ""nearest"" ]"
"0","# "
"0","# rounded.dates_vaul19 <- rounded.dates_vaul19 %>%"
"0","#   dplyr::rename(datetimeAK_old = datetimeAK)"
"0","# rounded.dates_vaul19 <- rounded.dates_vaul19 %>%"
"0","#   dplyr::rename(datetimeAK = datetimeAK1)"
"0","# "
"0","# rounded.dates_vaul19 <- rounded.dates_vaul19 %>%"
"0","#   select(meanDepth, datetimeAK)"
"0","# "
"0","# Vaul.2019.DO.Depth <- merge(VAUL_EXO_cl.2019.renamed, rounded.dates_vaul19, by = ""datetimeAK"", all = TRUE)"
"0","# Vaul.2019.DO.Depth$meanDepth1 <- Vaul.2019.DO.Depth$meanDepth"
"0","# "
"0","# vaul19mod <- lm(meanDepth ~ datetimeAK, Vaul.2019.DO.Depth)"
"0","# "
"0","# summary(vaul19mod)"
"0","# "
"0","# Vaul.2019.DO.Depth <- Vaul.2019.DO.Depth %>% "
"0","#   mutate(predictedDepth = predict(vaul19mod, .)) %>%"
"0","#   # Replace NA with pred in var1"
"0","#   mutate(meanDepth = ifelse(is.na(meanDepth), predictedDepth, meanDepth))"
"0","# "
"0",""
"0",""
"0",""
"0",""
"0",""
"0",""
"0","#USE TELEM FILLED DATA TO CALCULATE MG/L "
"0",""
"0",""
"0","#calc from YSI %Sat to MGL spreadsheet"
"0",""
"0","# # DO data collected as concentrations can be "
"0","# converted to percent saturation using temperature and salinity data collected in conjunction with "
"0","# the DO measurements using the equations as provided in APHA, 1989:"
"0",""
"0",""
"0","# DOsat = (Exp((-139.34411 + (157570.1/Temp) - (66423080/Temp2"
"0","# ) + (12438000000/Temp3"
"0","# ) - "
"0","#   (862194900000/Temp4"
"0","#   )) - (Sal * (0.017674-(10.754/Temp)+(2140.7/Temp2"
"0","#   )))))"
"0","# % DO = (DOmeasure/ DOsat)*100 "
"0",""
"0",""
"0","# Where:"
"0","#   DOsat = DO concentration in mg/L at 100 % saturation, "
"0","# Temp = water temperature in Â°K (Â°C + 273.15 = Â°K) "
"0","# DOmeasure = Measured DO concentration in mg/L."
"0","# Sal = Salinity in part per thousand (ppt)"
"0",""
"0","#Constants: "
"0","# 862194900000"
"0","# 12438000000"
"0","# 66423080"
"0","# 157570.1"
"0","# 139.344"
"0","#"
"0",""
"0","#We change this according to how YSI does it in the EXO"
"0",""
"0",""
"0",""
"0","#in this case, we are finding the DO mg/L per percent saturation, and multiplying it by our percent sat from telem. This percent sat accounts for pressure as well I believe. "
"0",""
"0",""
"0","VAUL_EXO_cl.2019.renamed$ODO.mgL.Calc <-as.numeric(VAUL_EXO_cl.2019.renamed$ODO.Psat) * "
"0","  #DO mg/L per sat"
"0","  (0.01* exp("
"0","    #p1"
"0","    (-862194900000*(1/(VAUL_EXO_cl.2019.renamed$Temp.C+273.15))^4+12438000000*(1/(VAUL_EXO_cl.2019.renamed$Temp.C+273.15))^3-66423080*(1/(VAUL_EXO_cl.2019.renamed$Temp.C+273.15))^2+157570.1*(1/(VAUL_EXO_cl.2019.renamed$Temp.C+273.15))-139.344)"
"0","    #salinity"
"0","    -0* "
"0","      #p2"
"0","      (2140.7*(1/(VAUL_EXO_cl.2019.renamed$Temp.C+273.15))^2-10.754*(1/(VAUL_EXO_cl.2019.renamed$Temp.C+273.15))+0.017674 )))"
"0",""
"0",""
"0","VAUL_EXO_cl.2019.renamed <- VAUL_EXO_cl.2019.renamed %>% "
"0","  mutate(ODO.mgL = coalesce(ODO.mgL,ODO.mgL.Calc))"
"0",""
"0",""
"0",""
"0","### 2020 ####"
"0",""
"0",""
"0","# exo.all.2020.url <- ""https://drive.google.com/drive/u/1/folders/1nNKoIdgP-fdCNRGUbGca_zVujF_16QEM"""
"0","# exo.all.2020.prt1 <- drive_get(as_id(exo.all.2020.url))"
"0","# exo.all.2020.glist <- drive_ls(exo.all.2020.prt1, pattern = ""EXO.ALL.csv"")"
"0","# walk(exo.all.2020.glist$id, ~ drive_download(as_id(.x), overwrite = TRUE))"
"0","# exo.all.2020 <- read.csv(""EXO.ALL.csv"",)"
"0",""
"0","vaul.exo.2020 <- read_csv(""C:/Users/jadams125/documents/GitHub/DoD_2020/EXO_processed/VAUL.EXO.cl.csv"")"
"1","[1mRows: [22m[34m12507[39m [1mColumns: [22m[34m28[39m
"
"1","[36m--[39m [1mColumn specification[22m [36m--------------------------------------------------------------------------[39m
[1mDelimiter:[22m "",""
[31mchr[39m   (1): site.ID
[32mdbl[39m  (25): X, fDOM.QSU.mn, fDOM.QSU.SD, ODO.Psat.mn, ODO.Psat.SD, ODO.Ploc.mn, ODO.Ploc.SD, OD...
[34mdttm[39m  (2): min, datetimeAK
"
"1","
[36mi[39m Use `spec()` to retrieve the full column specification for this data.
[36mi[39m Specify the column types or set `show_col_types = FALSE` to quiet this message.
"
"0","vaul.exo.2020 <- vaul.exo.2020 %>%"
"0","  dplyr::rename(ODO.mgL = ODO.mgL.mn.adj, ODO.Psat = ODO.Psat.mn.adj, ODO.Ploc = ODO.Ploc.mn.adj, Temp.C = Temp.C.mn) %>% select(datetimeAK, Temp.C, ODO.mgL, ODO.Psat, ODO.Ploc, site.ID)"
"0",""
"0","vaul.exo.2020$datetimeAK <- force_tz(as.POSIXct(vaul.exo.2020$datetimeAK), ""America/Anchorage"")"
"0",""
"0",""
"0",""
"0","# "
"0","# vaul.exo.2020 <- exo.all.2020 %>% filter(site.ID == ""VAUL"")"
"0",""
"0",""
"0","# #remove bad data point"
"0","# vaul.exo.2020 <- vaul.exo.2020[-c(56619)]"
"0",""
"0",""
"0","#convert Bursts to means"
"0",""
"0","# "
"0","# "
"0","# vaul.exo.2020$datetimeAK <- as.POSIXct(strptime(vaul.exo.2020$datetimeAK, ""%m/%e/%y %H:%M""))"
"0","# "
"0","# "
"0","# "
"0","# vaul.exo.2020$Temp.C <- as.numeric(vaul.exo.2020$Temp.C)"
"0","# vaul.exo.2020$ODO.Psat <- as.numeric(vaul.exo.2020$ODO.Psat)"
"0","# vaul.exo.2020$ODO.mgL <- as.numeric(vaul.exo.2020$ODO.mgL)"
"0","# vaul.exo.2020$ODO.Ploc <- as.numeric(vaul.exo.2020$ODO.Ploc)"
"0","# "
"0","# "
"0","# "
"0","# #mean bursts"
"0","# VAULmean2020odoMGL <- aggregate( ODO.mgL ~ datetimeAK, vaul.exo.2020, mean)"
"0","# VAULmean2020odoPSAT <- aggregate( ODO.Psat ~ datetimeAK, vaul.exo.2020, mean)"
"0","# VAULmean2020odoPLOC <- aggregate( ODO.Ploc ~ datetimeAK, vaul.exo.2020, mean)"
"0","# VAULmean2020odoTEMPC <- aggregate( Temp.C ~ datetimeAK, vaul.exo.2020, mean)"
"0","# "
"0","# VAULmeans2020ODO <- plyr::join(VAULmean2020odoMGL, VAULmean2020odoPSAT, by = ""datetimeAK"")"
"0","# VAULmeans2020ODO <- plyr::join(VAULmeans2020ODO, VAULmean2020odoPLOC, by = ""datetimeAK"")"
"0","# VAULmeans2020ODO <- plyr::join(VAULmeans2020ODO, VAULmean2020odoTEMPC, by = ""datetimeAK"")"
"0","# "
"0","# #remove outlier point"
"0","# VAULmeans2020ODO.1 <- VAULmeans2020ODO %>% filter(datetimeAK <= ""2020-08-09 22:30:00"")"
"0","# VAULmeans2020ODO.2 <- VAULmeans2020ODO %>% filter(datetimeAK > ""2020-08-09 23:00:00"")"
"0","# "
"0","# VAULmeans2020ODO <- rbind(VAULmeans2020ODO.1,VAULmeans2020ODO.2)                                                  "
"0","# VAULmeans2020ODO$datetimeAK <-  lubridate::round_date(VAULmeans2020ODO$datetimeAK, ""15 minutes"") "
"0","# "
"0","# VAULmeans2020ODO <- distinct(VAULmeans2020ODO)"
"0","# "
"0","# #duplicate rows meaned"
"0","# library(plyr)"
"0","# VAULmeans2020ODO = ddply("
"0","#   VAULmeans2020ODO,"
"0","#   .(datetimeAK),"
"0","#   function(df_section) {"
"0","#     res_df = data.frame(datetimeAK=df_section$datetimeAK[1], ODO.mgL=mean(df_section$ODO.mgL), ODO.Ploc = mean(df_section$ODO.Ploc), ODO.Psat = mean(df_section$ODO.Psat), Temp.C = mean(df_section$Temp.C))"
"0","#   }"
"0","# )"
"0","# "
"0","# ########## DEPTH ############ "
"0","# "
"0","# "
"0","# # Vaul:"
"0","# "
"0","# #download flowmeter data"
"0","# WR_20.url <- ""https://drive.google.com/drive/u/1/folders/1l-QIICuviZvugbNGrvoLfkCDgo1HyDMg"""
"0","# WR.20.1 <- drive_get(as_id(WR_20.url))"
"0","# vaul.wr20_glist <- drive_ls(WR.20.1, pattern = ""R_Flowmeter Q calculation_VAUL_for_R_JAA.csv"")"
"0","# walk(vaul.wr20_glist$id, ~ drive_download(as_id(.x), overwrite = TRUE))"
"0","# vaul_WR_20.Data <- read.csv(""R_Flowmeter Q calculation_VAUL_for_R_JAA.csv"","
"0","#                             skip = 0, header = TRUE, na.strings=c("""",""NA"",""blank""))"
"0","# "
"0","# "
"0","# vaul_WR_20.Data <- vaul_WR_20.Data %>%"
"0","#   dplyr::rename(Date = Ã¯..Date)"
"0","# "
"0","# vaul_WR_20.Data <- vaul_WR_20.Data %>% tidyr::fill(Date, .direction = (""down""))"
"0","# "
"0","# vaul_WR_20.Data <- vaul_WR_20.Data %>% tidyr::fill(Time, .direction = (""down""))"
"0","# "
"0","# "
"0","# vaul_WR_20.Data$datetimeAK <- as.POSIXct(paste(vaul_WR_20.Data$Date, vaul_WR_20.Data$Time), format=""%y%m%d %H:%M"")"
"0","# "
"0","# "
"0","# vaul_WR_20.Data <- vaul_WR_20.Data %>%"
"0","#   select(Depth..cm., datetimeAK)"
"0","# "
"0","# Vaul_depth_20 <- ddply(na.omit(vaul_WR_20.Data), .(datetimeAK), summarize, meanDepth = mean(as.numeric(Depth..cm.)))"
"0","# "
"0","# # vaul_wr.lm <- lm(meanDepth~datetimeAK, Vaul_depth_20)"
"0","# "
"0","# "
"0","# Vaul_depth_20 <- setDT(Vaul_depth_20)"
"0","# "
"0","# Vaul_depth_20 <- Vaul_depth_20 %>%"
"0","#   dplyr::rename(datetimeAK = datetimeAK)"
"0","# "
"0","# VAULmeans2020ODO <- setDT(VAULmeans2020ODO)"
"0","# "
"0","# setDT(Vaul_depth_20)"
"0","# setDT(VAULmeans2020ODO)"
"0","# "
"0","# VAULmeans2020ODO$datetimeAK1 <- VAULmeans2020ODO$datetimeAK"
"0","# "
"0","# setkey( VAULmeans2020ODO, datetimeAK )"
"0","# setkey( Vaul_depth_20, datetimeAK )"
"0","# "
"0","# #WR was taken when EXO out of water. round depth point to nearest in data record"
"0","# rounded.dates_vaul20 <- VAULmeans2020ODO[ Vaul_depth_20, roll = ""nearest"" ]"
"0","# "
"0","# rounded.dates_vaul20 <- rounded.dates_vaul20 %>%"
"0","#   dplyr::rename(datetimeAK_old = datetimeAK)"
"0","# rounded.dates_vaul20 <- rounded.dates_vaul20 %>%"
"0","#   dplyr::rename(datetimeAK = datetimeAK1)"
"0","# "
"0","# rounded.dates_vaul20 <- rounded.dates_vaul20 %>%"
"0","#   select(meanDepth, datetimeAK)"
"0","# "
"0","# Vaul.2020.DO.Depth <- merge(VAULmeans2020ODO, rounded.dates_vaul20, by = ""datetimeAK"", all = TRUE)"
"0","# Vaul.2020.DO.Depth$meanDepth1 <- Vaul.2020.DO.Depth$meanDepth"
"0","# "
"0","# vaul20mod <- lm(meanDepth ~ datetimeAK, Vaul.2020.DO.Depth)"
"0","# "
"0","# summary(vaul20mod)"
"0","# "
"0","# Vaul.2020.DO.Depth <- Vaul.2020.DO.Depth %>% "
"0","#   mutate(predictedDepth = predict(vaul20mod, .)) %>%"
"0","#   # Replace NA with pred in var1"
"0","#   mutate(meanDepth = ifelse(is.na(meanDepth), predictedDepth, meanDepth))"
"0","# "
"0",""
"0",""
"0",""
"0",""
"0",""
"0","#### 2021 ####"
"0","vaul.exo.2021 <- exo.processed.2021 %>% filter(site.ID == ""VAUL"")"
"0",""
"0",""
"0","vaul.exo.2021$datetimeAK <- lubridate::round_date(vaul.exo.2021$datetimeAK, ""15 minutes"")"
"0","vaul.exo.2021$datetimeAK <- force_tz(vaul.exo.2021$datetimeAK, ""America/Anchorage"")"
"0",""
"0","vaul.exo.2021$Temp.C <- as.numeric(vaul.exo.2021$Temp.C)"
"0","vaul.exo.2021$ODO.Psat <- as.numeric(vaul.exo.2021$ODO.Psat)"
"0","vaul.exo.2021$ODO.mgL <- as.numeric(vaul.exo.2021$ODO.mgL)"
"0","vaul.exo.2021$ODO.Ploc <- as.numeric(vaul.exo.2021$ODO.Ploc)"
"0",""
"0",""
"0",""
"0","#mean bursts"
"0","VAULmean2021odoMGL <- aggregate( ODO.mgL ~ datetimeAK, vaul.exo.2021, mean)"
"0","VAULmean2021odoPSAT <- aggregate( ODO.Psat ~ datetimeAK, vaul.exo.2021, mean)"
"0","VAULmean2021odoPLOC <- aggregate( ODO.Ploc ~ datetimeAK, vaul.exo.2021, mean)"
"0","VAULmean2021odoTEMPC <- aggregate( Temp.C ~ datetimeAK, vaul.exo.2021, mean)"
"0",""
"0","VAULmeans2021ODO <- plyr::join(VAULmean2021odoMGL, VAULmean2021odoPSAT, by = ""datetimeAK"")"
"0","VAULmeans2021ODO <- plyr::join(VAULmeans2021ODO, VAULmean2021odoPLOC, by = ""datetimeAK"")"
"0","VAULmeans2021ODO <- plyr::join(VAULmeans2021ODO, VAULmean2021odoTEMPC, by = ""datetimeAK"")"
"0",""
"0","# "
"0","# ########## DEPTH ############ "
"0","# "
"0","# "
"0","# # Vaul:"
"0","# "
"0","# #download flowmeter data"
"0","# WR_21.url <- ""https://drive.google.com/drive/u/1/folders/13avby555rryYttGDgO8sKE7umZPmo5uB"""
"0","# WR.21.1 <- drive_get(as_id(WR_21.url))"
"0","# vaul.wr21_glist <- drive_ls(WR.21.1, pattern = ""R_Flowmeter Q calculation_VAUL_for_R_JAA_2021.csv"")"
"0","# walk(vaul.wr21_glist$id, ~ drive_download(as_id(.x), overwrite = TRUE))"
"0","# vaul_WR_21.Data <- read.csv(""R_Flowmeter Q calculation_VAUL_for_R_JAA_2021.csv"","
"0","#                             skip = 0, header = TRUE, na.strings=c("""",""NA"",""blank""))"
"0","# "
"0","# "
"0","# vaul_WR_21.Data <- vaul_WR_21.Data %>%"
"0","#   dplyr::rename(Date = Ã¯..Date)"
"0","# "
"0","# vaul_WR_21.Data <- vaul_WR_21.Data %>% tidyr::fill(Date, .direction = (""down""))"
"0","# "
"0","# vaul_WR_21.Data <- vaul_WR_21.Data %>% tidyr::fill(Time, .direction = (""down""))"
"0","# "
"0","# "
"0","# vaul_WR_21.Data$datetimeAK <- as.POSIXct(paste(vaul_WR_21.Data$Date, vaul_WR_21.Data$Time), format=""%y%m%d %H:%M"")"
"0","# "
"0","# "
"0","# vaul_WR_21.Data <- vaul_WR_21.Data %>%"
"0","#   select(Depth..cm., datetimeAK)"
"0","# "
"0","# Vaul_depth_21 <- ddply(na.omit(vaul_WR_21.Data), .(datetimeAK), summarize, meanDepth = mean(as.numeric(Depth..cm.)))"
"0","# "
"0","# # vaul_wr.lm <- lm(meanDepth~datetimeAK, Vaul_depth_21)"
"0","# "
"0","# "
"0","# Vaul_depth_21 <- setDT(Vaul_depth_21)"
"0","# "
"0","# Vaul_depth_21 <- Vaul_depth_21 %>%"
"0","#   dplyr::rename(datetimeAK = datetimeAK)"
"0","# "
"0","# VAULmeans2021ODO <- setDT(VAULmeans2021ODO)"
"0","# "
"0","# setDT(Vaul_depth_21)"
"0","# setDT(VAULmeans2021ODO)"
"0","# "
"0","# VAULmeans2021ODO$datetimeAK1 <- VAULmeans2021ODO$datetimeAK"
"0","# "
"0","# setkey( VAULmeans2021ODO, datetimeAK )"
"0","# setkey( Vaul_depth_21, datetimeAK )"
"0","# "
"0","# #WR was taken when EXO out of water. round depth point to nearest in data record"
"0","# rounded.dates_vaul21 <- VAULmeans2021ODO[ Vaul_depth_21, roll = ""nearest"" ]"
"0","# "
"0","# rounded.dates_vaul21 <- rounded.dates_vaul21 %>%"
"0","#   dplyr::rename(datetimeAK_old = datetimeAK)"
"0","# rounded.dates_vaul21 <- rounded.dates_vaul21 %>%"
"0","#   dplyr::rename(datetimeAK = datetimeAK1)"
"0","# "
"0","# rounded.dates_vaul21 <- rounded.dates_vaul21 %>%"
"0","#   select(meanDepth, datetimeAK)"
"0","# "
"0","# Vaul.2021.DO.Depth <- merge(VAULmeans2021ODO, rounded.dates_vaul21, by = ""datetimeAK"", all = TRUE)"
"0","# Vaul.2021.DO.Depth$meanDepth1 <- Vaul.2021.DO.Depth$meanDepth"
"0","# "
"0","# vaul21mod <- lm(meanDepth ~ datetimeAK, Vaul.2021.DO.Depth)"
"0","# "
"0","# summary(vaul21mod)"
"0","# "
"0","# Vaul.2021.DO.Depth <- Vaul.2021.DO.Depth %>% "
"0","#   mutate(predictedDepth = predict(vaul21mod, .)) %>%"
"0","#   # Replace NA with pred in var1"
"0","#   mutate(meanDepth = ifelse(is.na(meanDepth), predictedDepth, meanDepth))"
"0",""
"0",""
"0",""
"0","#Put together"
"0","VAUL_EXO_cl.2019.renamed <- VAUL_EXO_cl.2019.renamed %>%"
"0","  select(datetimeAK, Temp.C, ODO.mgL, ODO.Psat, ODO.Ploc)"
"0",""
"0","vaul.exo.2020 <- vaul.exo.2020 %>%"
"0","  select(datetimeAK, Temp.C, ODO.mgL, ODO.Psat, ODO.Ploc)"
"0",""
"0",""
"0","VAULmeans2021ODO <- VAULmeans2021ODO %>%"
"0","  select(datetimeAK, Temp.C, ODO.mgL, ODO.Psat, ODO.Ploc)"
"0",""
"0",""
"0","All.years.vaul.MESSY <- rbind(VAUL_EXO_cl.2019.renamed, vaul.exo.2020, VAULmeans2021ODO)"
"0",""
"0","All.years.vaul.MESSY <- All.years.vaul.MESSY %>%"
"0","  dplyr::rename(DO.obs = ODO.mgL)"
"0",""
"0","All.years.vaul.MESSY <- All.years.vaul.MESSY %>%"
"0","  dplyr::rename(temp.water = Temp.C)"
"0",""
"0",""
"0","# All.years.vaul.MESSY <- All.years.vaul.MESSY[-c(19166)]"
"0",""
"0",""
"0","#keep in mind 2019 and 2020 is clean data and 2021 is not."
"0","pdf(file = ""C:/Users/jadams125/documents/GitHub/UAF-Metabolism/Plots/VaultODO.pdf"")"
