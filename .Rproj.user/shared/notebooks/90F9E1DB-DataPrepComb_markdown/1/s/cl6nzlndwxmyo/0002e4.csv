"0","# abline(poke19_depth_mod)"
"0",""
"0","#extract slope of model and develop rating curve"
"0","poke.2019.q.dt$RatingCurveDepth <- poke19_depth_mod$coefficients[1]+(poke19_depth_mod$coefficients[2])*poke.2019.q.dt$Q"
"0",""
"0","#MY METHOD"
"0","#MY METHOD"
"0",""
"0","#MY METHOD"
"0",""
"0","#MY METHOD"
"0","#MY METHOD"
"0",""
"0","#MY METHOD"
"0",""
"0",""
"0",""
"0","# Vaul 2020:"
"0",""
"0","#download flowmeter data"
"0","WR_20.url <- ""https://drive.google.com/drive/u/1/folders/1l-QIICuviZvugbNGrvoLfkCDgo1HyDMg"""
"0","WR.20.1 <- drive_get(as_id(WR_20.url))"
"0","vaul.wr20_glist <- drive_ls(WR.20.1, pattern = ""R_Flowmeter Q calculation_VAUL_for_R_JAA.csv"")"
"1",""
"1"," "
"0","walk(vaul.wr20_glist$id, ~ drive_download(as_id(.x), overwrite = TRUE))"
"1","File downloaded:
"
"1","[36m*[39m [36mR_Flowmeter Q calculation_VAUL_for_R_JAA.csv[39m [90m<id: 1pOmdHd3fohHaDe1DX7-5uYNWThzyeeDO>[39m
"
"1","Saved locally as:
"
"1","[36m*[39m [34mR_Flowmeter Q calculation_VAUL_for_R_JAA.csv[39m
"
"0","vaul_WR_20.Data <- read.csv(""R_Flowmeter Q calculation_VAUL_for_R_JAA.csv"","
"0","                          header = TRUE, na.strings=c("""",""NA"",""blank""))%>% rename(Date = Ã¯..Date)"
"0",""
"0","# vaul_WR_20.Data <- vaul_WR_20.Data %>% rename(Date = Ã¯..Date)"
"0",""
"0","vaul_WR_20.Data <- vaul_WR_20.Data %>% tidyr::fill(Date, .direction = (""down""))"
"0",""
"0","vaul_WR_20.Data <- vaul_WR_20.Data %>% tidyr::fill(Time, .direction = (""down""))"
"0",""
"0","vaul_WR_20.Data$datetimeAK <- as.POSIXct(paste(as.character(vaul_WR_20.Data$Date), vaul_WR_20.Data$Time), format=""%y%m%d %H:%M"")"
"0",""
"0",""
"0",""
"0","vaul_WR_20.Data <- vaul_WR_20.Data %>%"
"0","  select(Depth..cm., datetimeAK)"
"0",""
"0","Vaul_depth_20_WR <- ddply(na.omit(vaul_WR_20.Data), .(datetimeAK), summarize, meanDepth = mean(as.numeric(Depth..cm.)))"
"0",""
"0","# vaul_wr.lm <- lm(meanDepth~datetimeAK, Vaul_depth_20)"
"0",""
"0",""
"0","Vaul_depth_20_WR <- setDT(Vaul_depth_20_WR)"
"0",""
"0","Vaul_depth_20_WR <- Vaul_depth_20_WR %>%"
"0","  dplyr::rename(datetimeAK = datetimeAK)"
"0",""
"0","# vaul.2020.pt <- vaul.2020.pt %>%"
"0","  # dplyr::rename(datetimeAK = DateTime)"
"0",""
"0","vaul.2020.pt <- setDT(vaul.2020.pt)"
"0",""
"0",""
"0",""
"0","# vaul.2020.pt <- vaul.2020.pt %>%"
"0","#   mutate(across(c(AvgAbsDepth),"
"0","#                 ~ifelse(datetimeAK >= ""2020-08-26 02:00:00"" & datetimeAK <= ""2020-09-08 12:15:00"", NA, .)))"
"0",""
"0",""
"0",""
"0","vaul.2020.q.dt <- VAUL.2020.Q"
"0","vaul.2020.q.dt <- vaul.2020.q.dt %>%"
"0","dplyr::rename(datetimeAK = DateTime)"
"0",""
"0","setDT(Vaul_depth_20_WR)"
"0","setDT(vaul.2020.q.dt)"
"0",""
"0","vaul.2020.q.dt$datetimeAK1 <- vaul.2020.q.dt$datetimeAK"
"0",""
"0","setkey( vaul.2020.q.dt, datetimeAK )"
"0","setkey( Vaul_depth_20_WR, datetimeAK )"
"0",""
"0","#WR was taken when EXO out of water. round depth point to nearest in data record"
"0","rounded.dates_vaul20 <- vaul.2020.q.dt[Vaul_depth_20_WR, roll = ""nearest""]"
"0",""
"0","rounded.dates_vaul20_WR_Q <- rounded.dates_vaul20 %>% rename(discharge = Q) %>% "
"0","  select(datetimeAK, discharge, meanDepth)"
"0",""
"0","#convert to meters"
"0","rounded.dates_vaul20_WR_Q$meanDepth <- rounded.dates_vaul20_WR_Q$meanDepth /100"
"0",""
"0","vaul_pt_wr_graph <- ggplot(rounded.dates_vaul20_WR_Q, aes(discharge, meanDepth)) +"
"0","  geom_point()"
"0","# Add regression line"
"0","vaul_pt_wr_graph + geom_smooth(method = lm) + xlab(""Discharge"") +ylab (""Depth (WR)"")"
"2","`geom_smooth()` using formula 'y ~ x'
"
